## 목표

---
### e-커머스 상품 주문 서비스 구현
  - 상품 주문에 필요한 메뉴 정보들을 구성하고 조회가 가능해야 합니다.
  - 사용자는 상품을 여러개 선택해 주문할 수 있고, 미리 충전한 잔액을 이용합니다.
  - 상품 주문 내역을 통해 판매량이 가장 높은 상품을 추천합니다.

## 유스케이스

---
1. 잔액 조회
    - **액터**: 일반 사용자
    - **목표**: 현재 잔액 확인하기
    - **시나리오**
        1. 사용자는 마이페이지 또는 결제 화면에서 잔액 조회를 선택한다.
        2. 시스템은 사용자의 현재 잔액 정보를 반환한다.
2. 잔액 충전
    - **액터**: 일반 사용자
    - **목표**: 포인트를 충전해 잔액 늘리기
    - **시나리오**
        1. 사용자는 잔액 충전을 선택한다.
        2. 충전 금액을 입력하고 결제를 진행한다.
        3. 시스템은 결제 성공 시, 사용자의 잔액을 증가시킨다.
    - 예외
        - 결제 시 카드 한도 초과
        - 인증 오류
        - 선택한 결제 수단 일시적 오류
3. 상품 목록 조회
    - **액터**: 일반 사용자
    - **목표**: 구매 가능한 상품 목록과 현재 잔여 수량 확인하기
    - **시나리오**
        1. 사용자는 상품 목록 페이지를 연다.
        2. 시스템은 현재 시점의 상품명, 가격, 잔여 수량을 반환한다.
    - 예외
        - DB 장애, 캐시 미반영으로 재고 불일치
4. 상위 상품 조회
    - 액터: 일반 사용자
    - 목표: 최근 3일간 가장 많이 팔린 상위 5개 상품 정보 조회하기
    - 시나리오
        1. 사용자는 상위 상품 조회하기를 선택한다.
        2. 시스템은 최근 3일간 판매량이 높은 상품 정보(상품명, 썸네일, 가격 등) 5개를 반환한다.
5. 선착순 쿠폰 발급
    - 엑터: 일반 사용자
    - 목표: 선착순 할인 쿠폰 발급받기
    - **시나리오**
        1. 사용자는 쿠폰 발급하기를 선택한다.
        2. 시스템은 남은 쿠폰이 있으면 발급해주고, 없으면 거부한다.
    - 예외
        - 잔여 쿠폰이 없음 (발급 실패)
        - 이미 발급받은 쿠폰 (중복 발급 제한 시)
        - 발급 기간이 아닌 경우
6. 쿠폰 조회
    - 엑터: 사용자
    - 목표: 발급받은 쿠폰 목록을 조회하기
    - **시나리오**
        1. 사용자는 쿠폰 목록 페이지를 연다.
        2. 시스템은 사용자가 보유한 유효한 쿠폰 목록을 반환한다.
7. 상품 주문/결제
    - 엑터: 사용자
    - 목표: 상품을 선택해 주문하고 충전된 잔액으로 결제 완료하기
    - 시나리오
        1. 사용자는 원하는 상품과 수량을 선택하고 주문을 요청한다.
        2. 시스템은 사용자의 잔액, 선택된 상품의 목록, 결제금액, 쿠폰 리스트를 반환한다.
        3. 사용자는 사용 가능한 쿠폰을 선택하고 결제 요청을 한다.
        4. 시스템은 사용자의 잔액을 확인하고 잔액이 충분하고 상품 재고가 유효하면 결제를 처리한다. 잔액이 부족하거나 상품이 품절되면 결제를 거부한다.
        5. 시스템은 주문 처리 결과(성공 또는 실패 메시지)를 사용자에게 보여준다.
    - 예외
        - 상품 품절
        - 잔액 부족
        - 쿠폰 유효기간 만료
---
## 기능 요구사항
| 요구사항   | 식별자 | 기능             | 기능 상세                                       | 정책                                                                                                                              |
|--------|-----|----------------|---------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------|
| 포인트   | B-1 | 포인트 조회         | 사용자는 자신의 포인트를 조회할 수 있다.                     | - 사용자는 자신의 포인트만 조회할 수 있다.<br>- 현재 시점의 포인트 잔액을 조회한다.                                                                             |
|        | B-2 | 포인트 충전         | 사용자는 자신의 포인트를 충전할 수 있다.                     | - 사용자는 자신의 포인트만 충전할 수 있다.<br>- 충전 최소 단위는 1,000원 이상이다.<br>- 최대 충전 금액은 1,000,000원 이다.                                             |
|        | B-3 | 포인트 충전 내역 조회 | 사용자는 자신의 포인트 충전 내역을 조회할 수 있다.             | - 사용자는 자신의 포인트만 조회할 수 있다.                                                                                                       |
| 상품    | P-1 | 상품 조회          | 사용자는 특정 상품의 정보를 조회할 수 있다.                   |                                                                                                                                 |
|        | P-2 | 상품 목록 조회       | 사용자는 등록된 상품 목록을 조회할 수 있다.                  |                                                                                                                                 |
|        | P-3 | 상위 상품 조회       | 사용자는 최근 3일간 가장 많이 팔린 상위 5개 상품 목록을 조회할 수 있다. | - 해당일 00시 기준 3일전부터 해당일 00시까지를 기준으로 한다.                                                                                          |
| 쿠폰    | C-1 | 쿠폰 정책 등록       | 관리자는 쿠폰 정책을 등록하여 쿠폰을 발행할 수 있다.            | - 사용자는 자신의 쿠폰만 조회할 수 있다.                                                                                                        |
|        | C-2 | 발급 가능 쿠폰 조회    | 사용자는 자신이 발급받을 수 있는 쿠폰 목록을 조회할 수 있다.              | - 사용자별 발급 가능 여부를 확인하여 목록을 제공한다. <br> - 쿠폰의 수량 및 사용자별 발급 제한 정책을 따른다.                                                             |
|        | C-3 | 사용자 쿠폰 발급      | 사용자는 발행된 쿠폰을 발급받을 수 있다.                     | - 쿠폰의 수량에 맞게 사용자 쿠폰이 발급되어야 한다. <br> - 한 사용자당 하나의 쿠폰만 발급받을 수 있다.                                                                 |
|        | C-4 | 사용자 쿠폰 조회      | 사용자는 자신이 보유한 쿠폰 목록을 조회할 수 있다.             | - 사용자는 자신의 쿠폰만 조회할 수 있다.                                                                                                        |
|        | C-5 | 사용자 쿠폰 사용      | 사용자는 자신이 보유한 쿠폰을 사용할 수 있다.                 | - 사용자는 자신의 쿠폰만 사용할 수 있다. <br> - 쿠폰을 사용하기 위해서 최소 주문 금액보다 높은 금액을 주문해야 한다. <br> - 최대 할인금액까지 할인받을 수 있다. |
| 주문/결제 | O-1 | 상품 주문          | 사용자는 상품을 주문할 수 있다.                            |                                                                                                                                 |
|        | O-2 | 상품 주문 내역 조회   | 사용자는 주문 내역을 조회할 수 있다.                        | - 샤용자는 자신의 주문 내역만 조회할 수 있다.                                                                                                     |
|        | O-3 | 상품 주문 걸제       | 사용자는 주문한 상품을 결제할 수 있다.                       | - 보유 포인트보다 많은 금액을 사용해서 결제할 수 없다.<br>주문 요청 완료 후 10분 이내로 결제 완료되지 않으면 주문을 취소한다.                                                    |
|        | O-4 | 주문 정보 외부 연동    | 주문 완료 시, 주문 정보는 외부 데이터 플랫폼으로 연동되어야 한다. | - 연동 실패 시 로그를 쌓고 재시도한다.                                                                                                         |
|        | O-5 | 주문 상품 조회       | 사용자는 자신이 주문한 상품 목록을 조회할 수 있다.             | - 사용자는 자신이 주문한 상품 목록만 조회할 수 있다.                                                                                                 |

## 비기능 요구사항
| 요구사항 | 내용 |
| --- | --- |
| 가용성 | - 시스템은 DB 장애 발생 시 자동으로 오류를 감지하고, 사용자에게 명확한 에러 메시지를 반환해야 한다. <br> - 장애 발생 시 시스템 전체가 중단되지 않도록 부분적인 서비스 지속이 가능해야 한다. |
| 데이터 일관성 | - 사용자에게 제공되는 데이터는 항상 데이터베이스의 상태와 일치해야 한다. <br> - 트랜잭션 또는 동기화 메커니즘을 통해 정합성을 유지해야 한다. |
| 동시성 | - 여러 사용자가 동시에 포인트를 충전하거나 사용할 경우, 잔액 계산에 오류가 없어야 한다. <br> - 동시에 다수의 주문이 들어올 경우, 재고 차감 로직은 데이터 충돌 없이 정확히 처리되어야 한다. |
| 성능 | - 사용자 요청(조회, 충전, 발급, 주문/결제 등)에 대한 평균 응답 시간은 1초 이내이어야 하며, 최대 2초를 넘지 않아야 한다.  |